(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2HYtI",SearchForm:"Searchbar_SearchForm__3ZGbH","SearchForm-button":"Searchbar_SearchForm-button__16eIM","SearchForm-button-label":"Searchbar_SearchForm-button-label__Cg6Is","SearchForm-input":"Searchbar_SearchForm-input__2DkUr"}},11:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__1qL3T","ImageGallery-text":"ImageGallery_ImageGallery-text__152Cq","Loader-container":"ImageGallery_Loader-container__25v3e"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__iHZD4",Modal:"Modal_Modal__3TWaj",Image:"Modal_Image__2OOR_"}},18:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2n3T1","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__21HjU"}},31:function(e,t,a){e.exports={Button:"Button_Button__2JaYj"}},32:function(e,t,a){e.exports={App:"App_App__1Sf22"}},37:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(8),c=a.n(s),o=(a(37),a(3)),i=a(4),u=a(7),l=a(6),h=a(9),m=(a(20),a(10)),g=a.n(m),p=a(1),d=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={value:""},e.onChange=function(t){var a=t.target.value;e.setState({value:a})},e.onSubmit=function(t){if(t.preventDefault(),e.state.value.trim())return e.props.onSubmit(e.state.value),void e.resetForm();Object(h.b)("Please, enter your request in search field",{toastId:"Searchbar-toast"})},e.resetForm=function(){e.setState({value:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.value;return Object(p.jsx)("header",{className:g.a.Searchbar,children:Object(p.jsxs)("form",{className:g.a.SearchForm,onSubmit:this.onSubmit,children:[Object(p.jsx)("button",{type:"submit",className:g.a["SearchForm-button"],children:Object(p.jsx)("span",{className:g.a["SearchForm-button-label"],children:"Search"})}),Object(p.jsx)("input",{className:g.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.onChange})]})})}}]),a}(r.Component),b=a(19),j=a(16),f=a.n(j),y=a(29),O=a(17),v=a.n(O),I=function(){function e(){Object(o.a)(this,e),this.BASE_URL="https://pixabay.com/api/",this.KEY="23997684-9eb4ec0071398138bd37e685f",this.IMAGE_TYPE="photo",this.ORIENTATION="horizontal",this.PER_PAGE=12,this.MAX_PAGES=42,this.searchQuery="",this.page=1}return Object(i.a)(e,[{key:"fetchPictures",value:function(){var e=Object(y.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.defaults.baseURL=this.BASE_URL,t="?image_type=".concat(this.IMAGE_TYPE,"&orientation=").concat(this.ORIENTATION,"&q=").concat(this.searchQuery,"&page=").concat(this.page,"&per_page=").concat(this.PER_PAGE,"&key=").concat(this.KEY,"\n"),e.next=4,v.a.get(t);case 4:if(200!==(a=e.sent).status){e.next=7;break}return e.abrupt("return",a.data);case 7:return e.abrupt("return",Promise.reject(new Error("Error fetching data")));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"query",set:function(e){this.searchQuery=e}},{key:"incPage",value:function(){this.page+=1}},{key:"resetPage",value:function(){this.page=1}},{key:"reachMaxPage",value:function(){return this.page>=this.MAX_PAGES}}]),e}(),S=a(30),_=a.n(S),x=(a(78),a(11)),M=a.n(x),A=a(18),w=a.n(A),P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.galleryImageURL,a=e.largeImageURL,r=e.tags,n=e.openModal;return Object(p.jsx)("li",{className:w.a.ImageGalleryItem,onClick:function(){n(a,r)},children:Object(p.jsx)("img",{className:w.a["ImageGalleryItem-image"],src:t,"data-src":a,alt:r})})}}]),a}(r.Component),L=a(31),k=a.n(L),R=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.loadMorePictures;return Object(p.jsx)("button",{className:k.a.Button,onClick:e,children:"Load more"})}}]),a}(r.Component),G="idle",E="pending",F="resolved",N="rejected",U=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={status:G,imagesArray:[],error:null,isLoadMorePicturesRequested:!1,hasImagesArrayMaxNumberOfItems:!1},e.picturesApiService=new I,e.loadMorePictures=function(){e.setState({isLoadMorePicturesRequested:!0})},e.showMessage=function(e){Object(h.b)(e,{toastId:"ImageGallery-toast"})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props.searchQuery,r=this.state.isLoadMorePicturesRequested,n=e.searchQuery!==a;(n||r)&&(this.setState({status:E}),r?(this.setState({isLoadMorePicturesRequested:!1}),this.picturesApiService.incPage()):(this.setState({imagesArray:[]}),this.picturesApiService.query=a,this.picturesApiService.resetPage()),this.picturesApiService.fetchPictures().then((function(e){return e.hits.map((function(e){return{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}))})).then((function(e){var a=e.length<12,r=0!==e.length;n&&!r&&t.showMessage("There are no results on your search query. Please, enter another request."),t.setState((function(t){return{imagesArray:[].concat(Object(b.a)(t.imagesArray),Object(b.a)(e)),status:F,hasImagesArrayMaxNumberOfItems:a}}))})).catch((function(e){return t.setState({error:e,status:N})})))}},{key:"render",value:function(){var e=this.props.openModal,t=this.state,a=t.status,r=t.imagesArray,n=t.error,s=t.hasImagesArrayMaxNumberOfItems,c=0!==r.length;return a===G?Object(p.jsx)("p",{className:M.a["ImageGallery-text"],children:"Please, enter your search query to find pictures"}):a===N?(this.showMessage(n.message),Object(p.jsx)("p",{className:M.a["ImageGallery-text"],children:"Error fetching data"})):Object(p.jsxs)(p.Fragment,{children:[c&&Object(p.jsx)("ul",{className:M.a.ImageGallery,children:r.map((function(t,a){var r=t.webformatURL,n=t.largeImageURL,s=t.tags;return Object(p.jsx)(P,{galleryImageURL:r,largeImageURL:n,tags:s,openModal:e},a)}))}),a===E&&Object(p.jsx)("div",{className:M.a["Loader-container"],children:Object(p.jsx)(_.a,{type:"Puff",color:"#00BFFF",height:300,width:300})}),!s&&a===F&&!this.picturesApiService.reachMaxPage()&&Object(p.jsx)(R,{loadMorePictures:this.loadMorePictures})]})}}]),a}(r.Component),C=a(14),q=a.n(C),T=document.querySelector("#modal-root"),B=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).handleBackdrop=function(t){t.target===t.currentTarget&&e.props.closeModal()},e.handleKeyDown=function(t){"Escape"===t.code&&e.props.closeModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.largeImageURL,a=e.tags;return Object(s.createPortal)(Object(p.jsx)("div",{className:q.a.Overlay,onClick:this.handleBackdrop,children:Object(p.jsx)("div",{className:q.a.Modal,children:Object(p.jsx)("img",{className:q.a.Image,src:t,alt:a})})}),T)}}]),a}(r.Component),Q=a(32),D=a.n(Q),Y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:"",showModal:!1,largeImageURL:"",tags:""},e.onSubmitSearchQuery=function(t){e.setState({searchQuery:t})},e.openModal=function(t,a){e.toggleModal(),e.setState({largeImageURL:t,tags:a})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.searchQuery,a=e.showModal,r=e.largeImageURL,n=e.tags;return Object(p.jsxs)("div",{className:D.a.App,children:[Object(p.jsx)(d,{onSubmit:this.onSubmitSearchQuery}),Object(p.jsxs)("main",{children:[Object(p.jsx)(U,{searchQuery:t,openModal:this.openModal}),a&&Object(p.jsx)(B,{closeModal:this.toggleModal,largeImageURL:r,tags:n}),Object(p.jsx)(h.a,{autoClose:3e3})]})]})}}]),a}(r.Component),K=Y,H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(K,{})}),document.getElementById("root")),H()}},[[79,1,2]]]);
//# sourceMappingURL=main.7d7a1311.chunk.js.map